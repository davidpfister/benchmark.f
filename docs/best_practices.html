<!-- HTML header for doxygen 1.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" class="dark-mode">
  <head>
    <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=9"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <meta name="author" content="SXS Collaboration">
    <meta name="generator" content="Doxygen 1.12.0"/>
  <title>Benchmark: Best Practices</title>
  <link href="tabs.css" rel="stylesheet" type="text/css"/>
  <script type="text/javascript" src="jquery.js"></script>
  <script type="text/javascript" src="dynsections.js"></script>
  <script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
  <script type="text/javascript" src="doxygen-awesome-fragment-copy-button.js"></script>
  <script type="text/javascript" src="doxygen-awesome-paragraph-link.js"></script>
  <script type="text/javascript" src="doxygen-awesome-interactive-toc.js"></script>
  <script type="text/javascript" src="doxygen-awesome-tabs.js"></script>
  <script type="text/javascript">
      DoxygenAwesomeFragmentCopyButton.init()
      DoxygenAwesomeDarkModeToggle.init()
      DoxygenAwesomeParagraphLink.init()
      DoxygenAwesomeInteractiveToc.init()
      DoxygenAwesomeTabs.init()
  </script>
  <link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
  <link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
  <script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
  <link href="doxygen.css" rel="stylesheet" type="text/css" />
  <link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
  <link rel="stylesheet" href="devibeans.css">
  <script src="highlight.js"></script>
<script>
$(function() {
	hljs.configure({useBR: false});
	$(".fragment").each(function(i,node) {
		$(node).removeClass("fragment");
		hljs.highlightBlock(node);
	});
});
</script>
  </head>
  <body>
  <div id="top"><!-- do not remove this div, it is closed by doxygen! -->
  <div id="titlearea">
    <table cellspacing="0" cellpadding="0">
      <tbody>
        <tr style="height: 56px;">
          <td id="projectlogo"><img alt="Logo" src="hare.png" /></td>
          <td id="projectalign" style="padding-left: 0.5em;">
            <div id="projectname">
              <a href="index.html">Benchmark</a>
            </div>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
  <!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('best_practices.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Best Practices</div></div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul>
  <li class="level1">
    <a href="#autotoc_md0">Isolate the code</a>
  </li>
  <li class="level1">
    <a href="#autotoc_md1">Isolate the environment</a>
  </li>
  <li class="level1">
    <a href="#autotoc_md2">Use a High-Precision Clock</a>
  </li>
  <li class="level1">
    <a href="#autotoc_md3">Warmup the Target Code</a>
  </li>
  <li class="level1">
    <a href="#autotoc_md4">Repeat Benchmarks and Report a Summary Statistic</a>
  </li>
</ul>
</div>
<div class="textblock"><p><a class="anchor" id="md__c_1_2_users_2dev_2_documents_2_git_hub_2sandbox_2benchmark_8f_2_8dox_2articles_2_best_8_practices"></a></p>
<p>There are good practices to keep in mind when benchmarking a Fortran code designed to avoid the most common problems and help to ensure reliability, reproducibility and usefulness of the results. The list below provides some tips to benchmark Fortran code:</p>
<h1><a class="anchor" id="autotoc_md0"></a>
Isolate the code</h1>
<p>This means separating the code from the main program, perhaps in terms of its execution and in terms of its interactions. When isolating code for benchmarking, consider creating small, self-contained examples that focus on the specific functionality you want to measure.</p>
<h1><a class="anchor" id="autotoc_md1"></a>
Isolate the environment</h1>
<p>This means executing a benchmark program that is optimized for execution and ensure the lowest possible overhead from the environment. It is always advisable to run the code from the command line and not from an IDE, or notebook like environment. Certain editors can add overhead that can dramatically slow down the execution of the program. They may also automatically add tracing and debugging capabilities.</p>
<p>In addition, it is good practice to disable program output and logging. Disk IO are usually slow as compared to other operations.</p>
<h1><a class="anchor" id="autotoc_md2"></a>
Use a High-Precision Clock</h1>
<p>The system has more than one clock available. In Fortran, one can use <code>cpu_time</code>, <code>date_and_time</code> and <code>system_clock</code> <code>system_clock</code> with 64-bits integer usually gives the best precision.</p>
<div class="fragment"><div class="line">block</div>
<div class="line">    <span class="keywordtype">integer(i8)</span> :: clock_max, clock_rate, clock_reading</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">call </span>system_clock(clock_reading, clock_rate, clock_max)</div>
<div class="line">    ctime = 1000_r8 * real(clock_reading, r8) / real(clock_rate, r8)</div>
<div class="line"><span class="keyword">end </span>block</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md3"></a>
Warmup the Target Code</h1>
<p>It is a good practice to warm up the target code before the target code is benchmarked. This ensures that the execution time is not longer than it might otherwise be and ensures that the code is able to run at the full speed. Warm up can be performed by executing the code directly before benchmarking.</p>
<h1><a class="anchor" id="autotoc_md4"></a>
Repeat Benchmarks and Report a Summary Statistic</h1>
<p>Benchmark results will vary. The reason is because of the natural variation in running a program on a system. It will take slightly more or less time each time it runs because of operating system activity, CPU load, memory usage, external dependencies, caching, etc.</p>
<p>This adds random noise to the benchmark measure which can be leveraged by repeating a benchmark many times and computing statistics on the results. Common statistical measures include the average, minimum, and maximum, outliers. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.9.1-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="articles.html">Documentation</a></li>
    <li class="footer">
    &copy; Copyright 2017 - 2024
    <a href="LICENSE.txt" target="_blank">
    <span class="hidden-xs">Distributed under the</span>
    MIT License</a>
  </ul>
</div>
</body>
</html>
